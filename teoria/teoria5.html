<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teoría y Práctica: Past Perfect y Past Continuous</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .content-container {
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 25px 40px;
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
        }
        h1 {
            color: #005f73;
            text-align: center;
            border-bottom: 2px solid #005f73;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #0077b6;
            margin-top: 40px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 8px;
        }
        h3 { color: #005f73; }
        .explanation-box {
            background-color: #e0f7fa;
            border-left: 5px solid #0077b6;
            padding: 15px; margin: 20px 0; border-radius: 5px;
        }
        .exercise-section {
            background-color: #fffbe6;
            border-left: 5px solid #ffc107;
            padding: 20px; margin-top: 25px; border-radius: 5px;
        }
        .exercise-section ol, .exercise-section ul { padding-left: 20px; list-style-position: inside; }
        .grammar-table {
            width: 100%; border-collapse: collapse; margin: 20px 0;
        }
        .grammar-table th, .grammar-table td {
            border: 1px solid #ddd; padding: 12px; text-align: left;
        }
        .grammar-table th { background-color: #0077b6; color: white; }
        .check-button {
            background-color: #0077b6; color: white; border: none;
            padding: 10px 15px; border-radius: 5px; cursor: pointer;
            margin-top: 15px; font-size: 16px;
        }
        .check-button:hover { background-color: #005f73; }
        
        .interactive-input {
            font-size: 1em; padding: 5px; border: 1px solid #ccc; border-radius: 4px; margin: 5px 0;
        }
        .large-input { 
            width: 95%;
            height: 80px;
            resize: vertical;
        }
        .correct-input { border-color: #4caf50; background-color: #e8f5e9; }
        .incorrect-input { border-color: #f44336; background-color: #ffebee; }
        
        .guideline-box {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<div class="content-container">
    <h1>Grammar: Past Perfect & Past Continuous</h1>

    <!-- SECCIÓN 1: TEORÍA -->
    <h2>1. Theory</h2>
    
    <div class="explanation-box">
        <h3>Past Perfect</h3>
        <p><strong>Forma:</strong> <code>had</code> + <code>Past Participle</code></p>
        <p><strong>Uso:</strong> Se utiliza para indicar que un evento ocurrió <strong>antes</strong> que otro evento ya completado en el pasado.</p>
        <ul>
            <li><i>The meeting <strong>had ended</strong> when he arrived.</i> (Primero terminó la reunión, después llegó él).</li>
            <li><i>The email <strong>had already been sent</strong> when John noticed the mistake.</i> (Primero se envió el email, después John notó el error).</li>
        </ul>
        <p>A menudo aparece en oraciones con conjunciones como <i>when, by the time, because, so</i>. El otro verbo suele estar en <i>Past Simple</i>.</p>
    </div>
    
    <div class="explanation-box">
        <h3>Past Continuous</h3>
        <p><strong>Forma:</strong> <code>was/were</code> + <code>verbo-ing</code></p>
        <p><strong>Uso:</strong> Se utiliza para hablar de algo que estaba <strong>en progreso</strong> en un momento particular del pasado. Frecuentemente, una acción en <i>Past Simple</i> interrumpe la acción en <i>Past Continuous</i>.</p>
        <ul>
            <li><i>As I <strong>was walking</strong> into the office, I <strong>noticed</strong> a new notice board.</i></li>
            <li><i>We <strong>were sleeping</strong> when suddenly all the electricity <strong>went out</strong>.</i></li>
        </ul>
        <p>También se usa para dar información de contexto en el pasado: <i>We <strong>were writing</strong> emails all day.</i></p>
    </div>

    <!-- SECCIÓN 2: EJERCICIOS -->
    <h2>2. Practice</h2>

    <div class="exercise-section">
        <h3>Ejercicio 2.1: Past Perfect - Business Scenario</h3>
        <p>Lee el siguiente escenario y responde a las preguntas usando tus propias ideas. Intenta usar el <strong>Past Perfect</strong> en tus respuestas.</p>
        <div class="guideline-box">
            <p><strong>Escenario:</strong> Alex had organised a crucial business presentation for the company’s annual conference. However, unexpected technical issues arose on the day of the presentation.</p>
        </div>
        <ol type="a">
            <li>
                <p>Have you ever organised an important presentation or event in a professional setting?</p>
                <textarea class="interactive-input large-input" placeholder="Escribe aquí tu experiencia..."></textarea>
            </li>
            <li>
                <p>Before the technical issues occurred, what might Alex have done to ensure the presentation’s success? (e.g., He had checked...)</p>
                <textarea class="interactive-input large-input" placeholder="Escribe aquí las posibles acciones previas..."></textarea>
            </li>
        </ol>
    </div>
    
    <div class="exercise-section">
        <h3>Ejercicio 2.2: Past Simple & Past Continuous</h3>
        <p>Completa las oraciones con los verbos entre paréntesis en <strong>Past Simple</strong> y <strong>Past Continuous</strong>.</p>
        <ol type="a">
            <li>As I <input type="text" id="ex2_a1" class="interactive-input"> (walk) into the office, I <input type="text" id="ex2_a2" class="interactive-input"> (notice) a new notice board.</li>
            <li>While I <input type="text" id="ex2_b1" class="interactive-input"> (prepare) for my presentation, the printer <input type="text" id="ex2_b2" class="interactive-input"> (jam) on me three times!</li>
            <li>The team <input type="text" id="ex2_c1" class="interactive-input"> (brainstorm) when the manager <input type="text" id="ex2_c2" class="interactive-input"> (interrupt) with an urgent request.</li>
            <li>I <input type="text" id="ex2_d1" class="interactive-input"> (chat) with my colleague when Mrs. Jones <input type="text" id="ex2_d2" class="interactive-input"> (approach) us.</li>
        </ol>
        <button class="check-button" onclick="checkAnswers()">Corregir Todos los Ejercicios</button>
    </div>
    
    <div class="exercise-section">
        <h3>Ejercicio 2.3: Past Perfect & Past Simple</h3>
        <p>Lee el siguiente pasaje y completa los huecos con el tiempo verbal adecuado: <strong>Past Perfect</strong> y <strong>Past Simple</strong>.</p>
        <ol type="a">
            <li>Before the new CEO <input type="text" id="ex3_a1" class="interactive-input"> (arrive), the company’s financial stability <input type="text" id="ex3_a2" class="interactive-input"> (already / ensure) by the outgoing leadership.</li>
            <li>The project <input type="text" id="ex3_b1" class="interactive-input"> (succeed) because the team <input type="text" id="ex3_b2" class="interactive-input"> (carefully / plan) every detail before its launch.</li>
            <li>By the time the market trends <input type="text" id="ex3_c1" class="interactive-input"> (change), our marketing team <input type="text" id="ex3_c2" class="interactive-input"> (already / adapt) its strategy to stay competitive.</li>
            <li>The decision to expand internationally <input type="text" id="ex3_d1" class="interactive-input"> (prove) profitable as the company <input type="text" id="ex3_d2" class="interactive-input"> (thoroughly / research) potential markets beforehand.</li>
            <li>Before the product <input type="text" id="ex3_e1" class="interactive-input"> (hit) the shelves, extensive testing <input type="text" id="ex3_e2" class="interactive-input"> (already / complete).</li>
            <li>The merger <input type="text" id="ex3_f1" class="interactive-input"> (not / happen) because the two companies <input type="text" id="ex3_f2" class="interactive-input"> (not / discuss) the terms thoroughly.</li>
            <li>By the time the conference <input type="text" id="ex3_g1" class="interactive-input"> (begin), our team <input type="text" id="ex3_g2" class="interactive-input"> (already / prepare) an impressive presentation.</li>
        </ol>
        <button class="check-button" onclick="checkAnswers()">Corregir Todos los Ejercicios</button>
    </div>
   
</div>

<script>
    function validateInputWithOptions(inputId, correctAnswersArray) {
        const inputElement = document.getElementById(inputId);
        const userValue = inputElement.value.trim().toLowerCase().replace(/'/g, '’');
        
        inputElement.classList.remove('correct-input', 'incorrect-input');
        
        const normalizedCorrectAnswers = correctAnswersArray.map(a => a.toLowerCase().replace(/'/g, '’'));
        
        if (normalizedCorrectAnswers.includes(userValue)) {
            inputElement.classList.add('correct-input');
        } else {
            inputElement.classList.add('incorrect-input');
        }
    }

    function checkAnswers() {
        // --- Comprobar Ejercicio 2.2 ---
        validateInputWithOptions('ex2_a1', ['was walking']);
        validateInputWithOptions('ex2_a2', ['noticed']);
        validateInputWithOptions('ex2_b1', ['was preparing']);
        validateInputWithOptions('ex2_b2', ['jammed']);
        validateInputWithOptions('ex2_c1', ['was brainstorming']);
        validateInputWithOptions('ex2_c2', ['interrupted']);
        validateInputWithOptions('ex2_d1', ['was chatting']);
        validateInputWithOptions('ex2_d2', ['approached']);

        // --- Comprobar Ejercicio 2.3 ---
        validateInputWithOptions('ex3_a1', ['arrived']);
        validateInputWithOptions('ex3_a2', ['had already been ensured']);
        validateInputWithOptions('ex3_b1', ['succeeded']);
        validateInputWithOptions('ex3_b2', ['had carefully planned']);
        validateInputWithOptions('ex3_c1', ['changed']);
        validateInputWithOptions('ex3_c2', ['had already adapted']);
        validateInputWithOptions('ex3_d1', ['proved']);
        validateInputWithOptions('ex3_d2', ['had thoroughly researched']);
        validateInputWithOptions('ex3_e1', ['hit']);
        validateInputWithOptions('ex3_e2', ['had already been completed']);
        validateInputWithOptions('ex3_f1', ["did not happen", "didn't happen"]);
        validateInputWithOptions('ex3_f2', ["had not discussed", "hadn't discussed"]);
        validateInputWithOptions('ex3_g1', ['began']);
        validateInputWithOptions('ex3_g2', ['had already prepared']);
    }
</script>

</body>
</html>